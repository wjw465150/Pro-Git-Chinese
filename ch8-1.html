<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
  "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">

<html>
  <head>
    <meta http-equiv="Content-type" content="text/html; charset=utf-8">
    <title>Pro Git - Pro Git 8.1 Git ä¸å…¶ä»–ç³»ç»Ÿ Git ä¸ Subversion</title>
    <link rel="stylesheet" href="master.css" tppabs="http://progit.org/stylesheets/master.css" type="text/css" media="screen" charset="utf-8"/>
    <script src="jquery.js" tppabs="http://progit.org/javascripts/jquery.js" type="text/javascript" charset="utf-8"></script>
    <script src="jquery.github.js" tppabs="http://progit.org/javascripts/jquery.github.js" type="text/javascript" charset="utf-8"></script>
    <link rel='alternate' type='application/rss+xml' href='http://feeds.feedburner.com/ProGitBook' />
  </head>
  <body>
    <div id='wrapper'>
      <div id='header'>
        <h1>Pro Git</h1>
        <h2>professional version control</h2>
      </div>
      <div id='menu'>
        <ul>
          <li><a href="javascript:if(confirm('http://progit.org/  \n\n¸ÃÎÄ¼şÎ´±» Teleport Pro ÏÂÔØ£¬ÒòÎª ËüÎ»ÓÚÆğÊ¼µØÖ·ÒÔÉèÖÃµÄ±ß½çÒÔÍâµÄÓò»òÂ·¾¶ÖĞ¡£  \n\nÄãÏëÒª´Ó·şÎñÆ÷´ò¿ªËüÂğ?'))window.location='http://progit.org/'" tppabs="http://progit.org/">Home</a></li>
          <li><a href="javascript:if(confirm('http://progit.org/book  \n\n¸ÃÎÄ¼şÎ´±» Teleport Pro ÏÂÔØ£¬ÒòÎª ËüÎ»ÓÚÆğÊ¼µØÖ·ÒÔÉèÖÃµÄ±ß½çÒÔÍâµÄÓò»òÂ·¾¶ÖĞ¡£  \n\nÄãÏëÒª´Ó·şÎñÆ÷´ò¿ªËüÂğ?'))window.location='http://progit.org/book'" tppabs="http://progit.org/book">Book</a></li>
          <li><a href="javascript:if(confirm('http://progit.org/blog.html  \n\n¸ÃÎÄ¼şÎ´±» Teleport Pro ÏÂÔØ£¬ÒòÎª ËüÎ»ÓÚÆğÊ¼µØÖ·ÒÔÉèÖÃµÄ±ß½çÒÔÍâµÄÓò»òÂ·¾¶ÖĞ¡£  \n\nÄãÏëÒª´Ó·şÎñÆ÷´ò¿ªËüÂğ?'))window.location='http://progit.org/blog.html'" tppabs="http://progit.org/blog.html">Blog</a></li>
          <li><a href="javascript:if(confirm('http://progit.org/about.html  \n\n¸ÃÎÄ¼şÎ´±» Teleport Pro ÏÂÔØ£¬ÒòÎª ËüÎ»ÓÚÆğÊ¼µØÖ·ÒÔÉèÖÃµÄ±ß½çÒÔÍâµÄÓò»òÂ·¾¶ÖĞ¡£  \n\nÄãÏëÒª´Ó·şÎñÆ÷´ò¿ªËüÂğ?'))window.location='http://progit.org/about.html'" tppabs="http://progit.org/about.html">About</a></li>
          <li><a href="javascript:if(confirm('http://progit.org/support.html  \n\n¸ÃÎÄ¼şÎ´±» Teleport Pro ÏÂÔØ£¬ÒòÎª ËüÎ»ÓÚÆğÊ¼µØÖ·ÒÔÉèÖÃµÄ±ß½çÒÔÍâµÄÓò»òÂ·¾¶ÖĞ¡£  \n\nÄãÏëÒª´Ó·şÎñÆ÷´ò¿ªËüÂğ?'))window.location='http://progit.org/support.html'" tppabs="http://progit.org/support.html">Support Us</a></li>
          <li><a href="javascript:if(confirm('http://github.com/progit  \n\n¸ÃÎÄ¼şÎ´±» Teleport Pro ÏÂÔØ£¬ÒòÎª ËüÎ»ÓÚÆğÊ¼µØÖ·ÒÔÉèÖÃµÄ±ß½çÒÔÍâµÄÓò»òÂ·¾¶ÖĞ¡£  \n\nÄãÏëÒª´Ó·şÎñÆ÷´ò¿ªËüÂğ?'))window.location='http://github.com/progit'" tppabs="http://github.com/progit" target='_blank' rel='me'>GitHub</a></li>
          <li><a href="javascript:if(confirm('http://twitter.com/twitter  \n\n¸ÃÎÄ¼şÎ´±» Teleport Pro ÏÂÔØ£¬ÒòÎª ËüÎ»ÓÚÆğÊ¼µØÖ·ÒÔÉèÖÃµÄ±ß½çÒÔÍâµÄÓò»òÂ·¾¶ÖĞ¡£  \n\nÄãÏëÒª´Ó·şÎñÆ÷´ò¿ªËüÂğ?'))window.location='http://twitter.com/twitter'" tppabs="http://twitter.com/twitter" target='_blank' rel='me'>Twitter</a></li>
        </ul>
      </div>
      <div id="message">
        This is an in-progress translation. <br/>
        To help translate the book, please
        fork the book <a href="javascript:if(confirm('http://github.com/progit/progit  \n\n¸ÃÎÄ¼şÎ´±» Teleport Pro ÏÂÔØ£¬ÒòÎª ËüÎ»ÓÚÆğÊ¼µØÖ·ÒÔÉèÖÃµÄ±ß½çÒÔÍâµÄÓò»òÂ·¾¶ÖĞ¡£  \n\nÄãÏëÒª´Ó·şÎñÆ÷´ò¿ªËüÂğ?'))window.location='http://github.com/progit/progit'" tppabs="http://github.com/progit/progit">at GitHub</a> and push your contributions.
      </div>
      <div id='content'>
        <h2 id='git__subversion'>Git ä¸ Subversion</h2>

<p>å½“å‰ï¼Œå¤§å¤šæ•°å¼€å‘ä¸­çš„å¼€æºé¡¹ç›®ä»¥åŠå¤§é‡çš„å•†ä¸šé¡¹ç›®éƒ½ä½¿ç”¨ Subversion æ¥ç®¡ç†æºç ã€‚ä½œä¸ºæœ€æµè¡Œçš„å¼€æºç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿï¼ŒSubversion å·²ç»å­˜åœ¨äº†æ¥è¿‘åå¹´çš„æ—¶é—´ã€‚å®ƒåœ¨è®¸å¤šæ–¹é¢ä¸ CVS ååˆ†ç±»ä¼¼ï¼Œåè€…æ˜¯å‰è€…å‡ºç°ä¹‹å‰ä»£ç æ§åˆ¶ä¸–ç•Œçš„éœ¸ä¸»ã€‚</p>

<p>Git æœ€ä¸ºé‡è¦çš„ç‰¹æ€§ä¹‹ä¸€æ˜¯åä¸º <code>git svn</code> çš„ Subversion åŒå‘æ¡¥æ¥å·¥å…·ã€‚è¯¥å·¥å…·æŠŠ Git å˜æˆäº† Subversion æœåŠ¡çš„å®¢æˆ·ç«¯ï¼Œä»è€Œè®©ä½ åœ¨æœ¬åœ°äº«å—åˆ° Git æ‰€æœ‰çš„åŠŸèƒ½ï¼Œè€Œåç›´æ¥å‘ Subversion æœåŠ¡å™¨æ¨é€å†…å®¹ï¼Œä»¿ä½›åœ¨æœ¬åœ°ä½¿ç”¨äº† Subversion å®¢æˆ·ç«¯ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨å…¶ä»–äººå¿å—å¤è‘£çš„åŒæ—¶ï¼Œä½ å¯ä»¥åœ¨æœ¬åœ°äº«å—åˆ†æ”¯åˆå¹¶ï¼Œä½¿æš‚å­˜åŒºåŸŸï¼Œè¡åˆä»¥åŠ å•é¡¹æŒ‘æ‹£ç­‰ç­‰ã€‚è¿™æ˜¯ä¸ªè®© Git å·å·æ½œå…¥åˆä½œå¼€å‘ç¯å¢ƒçš„å¥½ä¸œè¥¿ï¼Œåœ¨å¸®åŠ©ä½ çš„å¼€å‘åŒä¼´ä»¬æé«˜æ•ˆç‡çš„åŒæ—¶ï¼Œå®ƒè¿˜èƒ½å¸®ä½ åŠè¯´å›¢é˜Ÿè®©æ•´ä¸ªé¡¹ç›®æ¡†æ¶è½¬å‘å¯¹ Git çš„æ”¯æŒã€‚è¿™ä¸ª Subversion ä¹‹æ¡¥æ˜¯é€šå‘åˆ†å¸ƒå¼ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿï¼ˆDVCS, Distributed VCS ï¼‰ä¸–ç•Œçš„ç¥å¥‡éš§é“ã€‚</p>

<h3 id='git_svn'>git svn</h3>

<p>Git ä¸­æ‰€æœ‰ Subversion æ¡¥æ¥å‘½ä»¤çš„åŸºç¡€æ˜¯ <code>git svn</code> ã€‚æ‰€æœ‰çš„å‘½ä»¤éƒ½ä»å®ƒå¼€å§‹ã€‚ç›¸å…³çš„å‘½ä»¤æ•°ç›®ä¸å°‘ï¼Œä½ å°†é€šè¿‡å‡ ä¸ªç®€å•çš„å·¥ä½œæµç¨‹äº†è§£åˆ°å…¶ä¸­å¸¸è§çš„ä¸€äº›ã€‚</p>

<p>å€¼å¾—è­¦æˆ’çš„æ˜¯ï¼Œåœ¨ä½¿ç”¨ <code>git svn</code> çš„æ—¶å€™ï¼Œä½ å®é™…æ˜¯åœ¨ä¸ Subversion äº¤äº’ï¼ŒGit æ¯”å®ƒè¦é«˜çº§å¤æ‚çš„å¤šã€‚å°½ç®¡å¯ä»¥åœ¨æœ¬åœ°éšæ„çš„è¿›è¡Œåˆ†æ”¯å’Œåˆå¹¶ï¼Œæœ€å¥½è¿˜æ˜¯é€šè¿‡è¡åˆä¿æŒçº¿æ€§çš„æäº¤å†å²ï¼Œå°½é‡é¿å…ç±»ä¼¼ä¸è¿œç¨‹ Git ä»“åº“åŠ¨æ€äº¤äº’è¿™æ ·çš„æ“ä½œã€‚</p>

<p>é¿å…ä¿®æ”¹å†å²å†é‡æ–°æ¨é€çš„åšæ³•ï¼Œä¹Ÿä¸è¦åŒæ—¶æ¨é€åˆ°å¹¶è¡Œçš„ Git ä»“åº“æ¥è¯•å›¾ä¸å…¶ä»– Git ç”¨æˆ·åˆä½œã€‚Subersion åªèƒ½ä¿å­˜å•ä¸€çš„çº¿æ€§æäº¤å†å²ï¼Œä¸€ä¸å°å¿ƒå°±ä¼šè¢«æç³Šæ¶‚ã€‚åˆä½œå›¢é˜Ÿä¸­åŒæ—¶æœ‰äººç”¨ SVN å’Œ Gitï¼Œä¸€å®šè¦ç¡®ä¿æ‰€æœ‰äººéƒ½ä½¿ç”¨ SVN æœåŠ¡æ¥åä½œâ€”â€”è¿™ä¼šè®©ç”Ÿæ´»è½»æ¾å¾ˆå¤šã€‚</p>

<h3 id='id390'>åˆå§‹è®¾å®š</h3>

<p>ä¸ºäº†å±•ç¤ºåŠŸèƒ½ï¼Œå…ˆè¦ä¸€ä¸ªå…·æœ‰å†™æƒé™çš„ SVN ä»“åº“ã€‚å¦‚æœæƒ³å°è¯•è¿™ä¸ªèŒƒä¾‹ï¼Œä½ å¿…é¡»å¤åˆ¶ä¸€ä»½å…¶ä¸­çš„æµ‹è¯•ä»“åº“ã€‚æ¯”è¾ƒç®€å•çš„åšæ³•æ˜¯ä½¿ç”¨ä¸€ä¸ªåä¸º <code>svnsync</code> çš„å·¥å…·ã€‚è¾ƒæ–°çš„ Subversion ç‰ˆæœ¬ä¸­éƒ½å¸¦æœ‰è¯¥å·¥å…·ï¼Œå®ƒå°†æ•°æ®ç¼–ç ä¸ºç”¨äºç½‘ç»œä¼ è¾“çš„æ ¼å¼ã€‚</p>

<p>è¦å°è¯•æœ¬ä¾‹ï¼Œå…ˆåœ¨æœ¬åœ°æ–°å»ºä¸€ä¸ª Subversion ä»“åº“ï¼š</p>

<pre><code>$ mkdir /tmp/test-svn
$ svnadmin create /tmp/test-svn</code></pre>

<p>ç„¶åï¼Œå…è®¸æ‰€æœ‰ç”¨æˆ·ä¿®æ”¹ revprop â€”â€” ç®€å•çš„åšæ³•æ˜¯æ·»åŠ ä¸€ä¸ªæ€»æ˜¯ä»¥ 0 ä½œä¸ºè¿”å›å€¼çš„ pre-revprop-change è„šæœ¬ï¼š</p>

<pre><code>$ cat /tmp/test-svn/hooks/pre-revprop-change 
#!/bin/sh
exit 0;
$ chmod +x /tmp/test-svn/hooks/pre-revprop-change</code></pre>

<p>ç°åœ¨å¯ä»¥è°ƒç”¨ <code>svnsync init</code> åŠ ç›®æ ‡ä»“åº“ï¼Œå†åŠ æºä»“åº“çš„æ ¼å¼æ¥æŠŠè¯¥é¡¹ç›®åŒæ­¥åˆ°æœ¬åœ°äº†ï¼š</p>

<pre><code>$ svnsync init file:///tmp/test-svn http://progit-example.googlecode.com/svn/ </code></pre>

<p>è¿™å°†å»ºç«‹è¿›è¡ŒåŒæ­¥æ‰€éœ€çš„å±æ€§ã€‚å¯ä»¥é€šè¿‡è¿è¡Œä»¥ä¸‹å‘½ä»¤æ¥å…‹éš†ä»£ç ï¼š</p>

<pre><code>$ svnsync sync file:///tmp/test-svn
Committed revision 1.
Copied properties for revision 1.
Committed revision 2.
Copied properties for revision 2.
Committed revision 3.
...</code></pre>

<p>åˆ«çœ‹è¿™ä¸ªæ“ä½œåªèŠ±æ‰å‡ åˆ†é’Ÿï¼Œè¦æ˜¯ä½ æƒ³æŠŠæºä»“åº“å¤åˆ¶åˆ°å¦ä¸€ä¸ªè¿œç¨‹ä»“åº“ï¼Œè€Œä¸æ˜¯æœ¬åœ°ä»“åº“ï¼Œé‚£å°†èŠ±æ‰æ¥è¿‘ä¸€ä¸ªå°æ—¶ï¼Œå°½ç®¡é¡¹ç›®ä¸­åªæœ‰ä¸åˆ° 100 æ¬¡çš„æäº¤ã€‚ Subversion æ¯æ¬¡åªå¤åˆ¶ä¸€æ¬¡ä¿®æ”¹ï¼ŒæŠŠå®ƒæ¨é€åˆ°å¦ä¸€ä¸ªä»“åº“é‡Œï¼Œç„¶åå‘¨è€Œå¤å§‹â€”â€”æƒŠäººçš„ä½æ•ˆï¼Œä½†æ˜¯æˆ‘ä»¬åˆ«æ— é€‰æ‹©ã€‚</p>

<h3 id='id391'>å…¥é—¨</h3>

<p>æœ‰äº†å¯ä»¥å†™å…¥çš„ Subversion ä»“åº“ä»¥åï¼Œå°±å¯ä»¥å°è¯•ä¸€ä¸‹å…¸å‹çš„å·¥ä½œæµç¨‹äº†ã€‚æˆ‘ä»¬ä» <code>git svn clone</code> å‘½ä»¤å¼€å§‹ï¼Œå®ƒä¼šæŠŠæ•´ä¸ª Subversion ä»“åº“å¯¼å…¥åˆ°ä¸€ä¸ªæœ¬åœ°çš„ Git ä»“åº“ä¸­ã€‚æé†’ä¸€ä¸‹ï¼Œè¿™é‡Œå¯¼å…¥çš„æ˜¯ä¸€ä¸ªè´§çœŸä»·å®çš„ Subversion ä»“åº“ï¼Œæ‰€ä»¥åº”è¯¥æŠŠä¸‹é¢çš„ <code>file:///tmp/test-svn</code> æ¢æˆä½ æ‰€ç”¨çš„ Subversion ä»“åº“çš„ URLï¼š</p>

<pre><code>$ git svn clone file:///tmp/test-svn -T trunk -b branches -t tags
Initialized empty Git repository in /Users/schacon/projects/testsvnsync/svn/.git/
r1 = b4e387bc68740b5af56c2a5faf4003ae42bd135c (trunk)
      A    m4/acx_pthread.m4
      A    m4/stl_hash.m4
...
r75 = d1957f3b307922124eec6314e15bcda59e3d9610 (trunk)
Found possible branch point: file:///tmp/test-svn/trunk =&gt; \
    file:///tmp/test-svn /branches/my-calc-branch, 75
Found branch parent: (my-calc-branch) d1957f3b307922124eec6314e15bcda59e3d9610
Following parent with do_switch
Successfully followed parent
r76 = 8624824ecc0badd73f40ea2f01fce51894189b01 (my-calc-branch)
Checked out HEAD:
 file:///tmp/test-svn/branches/my-calc-branch r76</code></pre>

<p>è¿™ç›¸å½“äºé’ˆå¯¹æ‰€æä¾›çš„ URL è¿è¡Œäº†ä¸¤æ¡å‘½ä»¤â€”â€” <code>git svn init</code> åŠ ä¸Š <code>gitsvn fetch</code> ã€‚å¯èƒ½ä¼šèŠ±ä¸Šä¸€æ®µæ—¶é—´ã€‚æˆ‘ä»¬æ‰€ç”¨çš„æµ‹è¯•é¡¹ç›®ä»…ä»…åŒ…å« 75 æ¬¡æäº¤å¹¶ä¸”å®ƒçš„ä»£ç é‡ä¸ç®—å¤§ï¼Œæ‰€ä»¥åªæœ‰å‡ åˆ†é’Ÿè€Œå·²ã€‚ä¸è¿‡ï¼ŒGit ä»ç„¶éœ€è¦æå–æ¯ä¸€ä¸ªç‰ˆæœ¬ï¼Œæ¯æ¬¡ä¸€ä¸ªï¼Œå†é€ä¸ªæäº¤ã€‚å¯¹äºä¸€ä¸ªåŒ…å«æˆç™¾ä¸Šåƒæ¬¡æäº¤çš„é¡¹ç›®ï¼ŒèŠ±æ‰çš„æ—¶é—´åˆ™å¯èƒ½æ˜¯å‡ å°æ—¶ç”šè‡³æ•°å¤©ã€‚</p>

<p><code>-T trunk -b branches -t tags</code> å‘Šè¯‰ Git è¯¥ Subversion ä»“åº“éµå¾ªäº†åŸºæœ¬çš„åˆ†æ”¯å’Œæ ‡ç­¾å‘½åæ³•åˆ™ã€‚å¦‚æœä½ çš„ä¸»å¹²(è¯‘æ³¨ï¼štrunkï¼Œç›¸å½“äºéåˆ†å¸ƒå¼ç‰ˆæœ¬æ§åˆ¶é‡Œçš„masteråˆ†æ”¯ï¼Œä»£è¡¨å¼€å‘çš„ä¸»çº¿ï¼‰ï¼Œåˆ†æ”¯æˆ–è€…æ ‡ç­¾ä»¥ä¸åŒçš„æ–¹å¼å‘½åï¼Œåˆ™åº”åšå‡ºç›¸åº”æ”¹å˜ã€‚ç”±äºè¯¥æ³•åˆ™çš„å¸¸è§æ€§ï¼Œå¯ä»¥ä½¿ç”¨ <code>-s</code> æ¥ä»£æ›¿æ•´æ¡å‘½ä»¤ï¼Œå®ƒæ„å‘³ç€æ ‡å‡†å¸ƒå±€ï¼ˆs æ˜¯ Standard layout çš„é¦–å­—æ¯ï¼‰ï¼Œä¹Ÿå°±æ˜¯å‰é¢é€‰é¡¹çš„å†…å®¹ã€‚ä¸‹é¢çš„å‘½ä»¤æœ‰ç›¸åŒçš„æ•ˆæœï¼š</p>

<pre><code>$ git svn clone file:///tmp/test-svn -s</code></pre>

<p>ç°åœ¨ï¼Œä½ æœ‰äº†ä¸€ä¸ªæœ‰æ•ˆçš„ Git ä»“åº“ï¼ŒåŒ…å«ç€å¯¼å…¥çš„åˆ†æ”¯å’Œæ ‡ç­¾ï¼š</p>

<pre><code>$ git branch -a
* master
  my-calc-branch
  tags/2.0.2
  tags/release-2.0.1
  tags/release-2.0.2
  tags/release-2.0.2rc1
  trunk</code></pre>

<p>å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œè¯¥å·¥å…·åˆ†é…å‘½åç©ºé—´æ—¶å’Œè¿œç¨‹å¼•ç”¨çš„æ–¹å¼ä¸å°½ç›¸åŒã€‚å…‹éš†æ™®é€šçš„ Git ä»“åº“æ—¶ï¼Œå¯ä»¥ä»¥ <code>origin/[branch]</code> çš„å½¢å¼è·å–è¿œç¨‹æœåŠ¡å™¨ä¸Šæ‰€æœ‰å¯ç”¨çš„åˆ†æ”¯â€”â€”åˆ†é…åˆ°è¿œç¨‹æœåŠ¡çš„åç§°ä¸‹ã€‚ç„¶è€Œ <code>git svn</code> å‡å®šä¸å­˜åœ¨å¤šä¸ªè¿œç¨‹æœåŠ¡å™¨ï¼Œæ‰€ä»¥æŠŠæ‰€æœ‰æŒ‡å‘è¿œç¨‹æœåŠ¡çš„å¼•ç”¨ä¸åŠ åŒºåˆ†çš„ä¿å­˜ä¸‹æ¥ã€‚å¯ä»¥ç”¨ Git æ¢æµ‹å‘½ä»¤ <code>show-ref</code> æ¥æŸ¥çœ‹æ‰€æœ‰å¼•ç”¨çš„å…¨åã€‚</p>

<pre><code>$ git show-ref
1cbd4904d9982f386d87f88fce1c24ad7c0f0471 refs/heads/master
aee1ecc26318164f355a883f5d99cff0c852d3c4 refs/remotes/my-calc-branch
03d09b0e2aad427e34a6d50ff147128e76c0e0f5 refs/remotes/tags/2.0.2
50d02cc0adc9da4319eeba0900430ba219b9c376 refs/remotes/tags/release-2.0.1
4caaa711a50c77879a91b8b90380060f672745cb refs/remotes/tags/release-2.0.2
1c4cb508144c513ff1214c3488abe66dcb92916f refs/remotes/tags/release-2.0.2rc1
1cbd4904d9982f386d87f88fce1c24ad7c0f0471 refs/remotes/trunk</code></pre>

<p>è€Œæ™®é€šçš„ Git ä»“åº“åº”è¯¥æ˜¯è¿™ä¸ªæ¨¡æ ·ï¼š</p>

<pre><code>$ git show-ref
83e38c7a0af325a9722f2fdc56b10188806d83a1 refs/heads/master
3e15e38c198baac84223acfc6224bb8b99ff2281 refs/remotes/gitserver/master
0a30dd3b0c795b80212ae723640d4e5d48cabdff refs/remotes/origin/master
25812380387fdd55f916652be4881c6f11600d6f refs/remotes/origin/testing</code></pre>

<p>è¿™é‡Œæœ‰ä¸¤ä¸ªè¿œç¨‹æœåŠ¡å™¨ï¼šä¸€ä¸ªåä¸º <code>gitserver</code> ï¼Œå…·æœ‰ä¸€ä¸ª <code>master</code>åˆ†æ”¯ï¼›å¦ä¸€ä¸ªå« <code>origin</code>ï¼Œå…·æœ‰ <code>master</code> å’Œ <code>testing</code> ä¸¤ä¸ªåˆ†æ”¯ã€‚</p>

<p>æ³¨æ„æœ¬ä¾‹ä¸­é€šè¿‡ <code>git svn</code> å¯¼å…¥çš„è¿œç¨‹å¼•ç”¨ï¼Œï¼ˆSubversion çš„)æ ‡ç­¾æ˜¯å½“ä½œè¿œç¨‹åˆ†æ”¯æ·»åŠ çš„ï¼Œè€Œä¸æ˜¯çœŸæ­£çš„ Git æ ‡ç­¾ã€‚å¯¼å…¥çš„ Subversion ä»“åº“ä»¿ä½›æ˜¯æœ‰ä¸€ä¸ªå¸¦æœ‰ä¸åŒåˆ†æ”¯çš„ tags è¿œç¨‹æœåŠ¡å™¨ã€‚</p>

<h3 id='_subversion'>æäº¤åˆ° Subversion</h3>

<p>æœ‰äº†å¯ä»¥å¼€å±•å·¥ä½œçš„ï¼ˆæœ¬åœ°ï¼‰ä»“åº“ä»¥åï¼Œä½ å¯ä»¥å¼€å§‹å¯¹è¯¥é¡¹ç›®åšå‡ºè´¡çŒ®å¹¶å‘ä¸Šæ¸¸ä»“åº“æäº¤å†…å®¹äº†ï¼ŒGit è¿™æ—¶ç›¸å½“äºä¸€ä¸ª SVN å®¢æˆ·ç«¯ã€‚å‡å¦‚ç¼–è¾‘äº†ä¸€ä¸ªæ–‡ä»¶å¹¶è¿›è¡Œæäº¤ï¼Œé‚£ä¹ˆè¿™æ¬¡æäº¤ä»…å­˜åœ¨äºæœ¬åœ°çš„ Git è€Œé Subversion æœåŠ¡å™¨ä¸Šã€‚</p>

<pre><code>$ git commit -am &#39;Adding git-svn instructions to the README&#39;
[master 97031e5] Adding git-svn instructions to the README
 1 files changed, 1 insertions(+), 1 deletions(-)</code></pre>

<p>æ¥ä¸‹æ¥ï¼Œå¯ä»¥å°†ä½œå‡ºçš„ä¿®æ”¹æ¨é€åˆ°ä¸Šæ¸¸ã€‚å€¼å¾—æ³¨æ„çš„æ˜¯ï¼ŒSubversion çš„ä½¿ç”¨æµç¨‹ä¹Ÿå› æ­¤æ”¹å˜äº†â€”â€”ä½ å¯ä»¥åœ¨ç¦»çº¿çŠ¶æ€ä¸‹è¿›è¡Œå¤šæ¬¡æäº¤ç„¶åä¸€æ¬¡æ€§çš„æ¨é€åˆ° Subversion çš„æœåŠ¡å™¨ä¸Šã€‚å‘ Subversion æœåŠ¡å™¨æ¨é€çš„å‘½ä»¤æ˜¯ <code>git svn dcommit</code>ï¼š</p>

<pre><code>$ git svn dcommit
Committing to file:///tmp/test-svn/trunk ...
       M      README.txt
Committed r79
       M      README.txt
r79 = 938b1a547c2cc92033b74d32030e86468294a5c8 (trunk)
No changes between current HEAD and refs/remotes/trunk
Resetting to the latest refs/remotes/trunk</code></pre>

<p>æ‰€æœ‰åœ¨åŸ Subversion æ•°æ®åŸºç¡€ä¸Šæäº¤çš„ commit ä¼šä¸€ä¸€æäº¤åˆ° Subversionï¼Œç„¶åä½ æœ¬åœ° Git çš„ commit å°†è¢«é‡å†™ï¼ŒåŠ å…¥ä¸€ä¸ªç‰¹åˆ«æ ‡è¯†ã€‚è¿™ä¸€æ­¥å¾ˆé‡è¦ï¼Œå› ä¸ºå®ƒæ„å‘³ç€æ‰€æœ‰ commit çš„ SHA-1 æŒ‡éƒ½ä¼šå‘ç”Ÿå˜åŒ–ã€‚è¿™ä¹Ÿæ˜¯åŒæ—¶ä½¿ç”¨ Git å’Œ Subversion ä¸¤ç§æœåŠ¡ä½œä¸ºè¿œç¨‹æœåŠ¡ä¸æ˜¯ä¸ªå¥½ä¸»æ„çš„åŸå› ä¹‹ä¸€ã€‚æ£€è§†ä»¥ä¸‹æœ€åä¸€ä¸ª commitï¼Œä½ ä¼šæ‰¾åˆ°æ–°æ·»åŠ çš„ <code>git-svn-id</code> ï¼ˆè¯‘æ³¨ï¼šå³æœ¬æ®µå¼€å¤´æ‰€è¯´çš„ç‰¹åˆ«æ ‡è¯†ï¼‰ï¼š</p>

<pre><code>$ git log -1
commit 938b1a547c2cc92033b74d32030e86468294a5c8
Author: schacon &lt;schacon@4c93b258-373f-11de-be05-5f7a86268029&gt;
Date:   Sat May 2 22:06:44 2009 +0000

    Adding git-svn instructions to the README

    git-svn-id: file:///tmp/test-svn/trunk@79 4c93b258-373f-11de-be05-5f7a86268029</code></pre>

<p>æ³¨æ„çœ‹ï¼ŒåŸæœ¬ä»¥ <code>97031e5</code> å¼€å¤´çš„ SHA-1 æ ¡éªŒå€¼åœ¨æäº¤å®Œæˆä»¥åå˜æˆäº† <code>938b1a5</code> ã€‚å¦‚æœæ—¢è¦å‘ Git è¿œç¨‹æœåŠ¡å™¨æ¨é€å†…å®¹ï¼Œåˆè¦æ¨é€åˆ° Subversion è¿œç¨‹æœåŠ¡å™¨ï¼Œåˆ™å¿…é¡»å…ˆå‘ Subversion æ¨é€ï¼ˆ<code>dcommit</code>ï¼‰ï¼Œå› ä¸ºè¯¥æ“ä½œä¼šæ”¹å˜æ‰€æäº¤çš„æ•°æ®å†…å®¹ã€‚</p>

<h3 id='id392'>æ‹‰å–æœ€æ–°è¿›å±•</h3>

<p>å¦‚æœè¦ä¸å…¶ä»–å¼€å‘è€…åä½œï¼Œæ€»æœ‰é‚£ä¹ˆä¸€å¤©ä½ æ¨é€å®Œæ¯•ä¹‹åï¼Œå…¶ä»–äººå‘ç°ä»–ä»¬æ¨é€è‡ªå·±ä¿®æ”¹çš„æ—¶å€™ï¼ˆä¸ä½ æ¨é€çš„å†…å®¹ï¼‰äº§ç”Ÿå†²çªã€‚è¿™äº›ä¿®æ”¹åœ¨ä½ åˆå¹¶ä¹‹å‰å°†ä¸€ç›´è¢«æ‹’ç»ã€‚åœ¨ <code>git svn</code> é‡Œè¿™ç§æƒ…å†µå½¢ä¼¼ï¼š</p>

<pre><code>$ git svn dcommit
Committing to file:///tmp/test-svn/trunk ...
Merge conflict during commit: Your file or directory &#39;README.txt&#39; is probably \
out-of-date: resource out of date; try updating at /Users/schacon/libexec/git-\
core/git-svn line 482</code></pre>

<p>ä¸ºäº†è§£å†³è¯¥é—®é¢˜ï¼Œå¯ä»¥è¿è¡Œ <code>git svn rebase</code> ï¼Œå®ƒä¼šæ‹‰å–æœåŠ¡å™¨ä¸Šæ‰€æœ‰æœ€æ–°çš„æ”¹å˜ï¼Œå†æ¬¡åŸºç¡€ä¸Šè¡åˆä½ çš„ä¿®æ”¹ï¼š</p>

<pre><code>$ git svn rebase
       M      README.txt
r80 = ff829ab914e8775c7c025d741beb3d523ee30bc4 (trunk)
First, rewinding head to replay your work on top of it...
Applying: first user change</code></pre>

<p>ç°åœ¨ï¼Œä½ åšå‡ºçš„ä¿®æ”¹éƒ½å‘ç”Ÿåœ¨æœåŠ¡å™¨å†…å®¹ä¹‹åï¼Œæ‰€ä»¥å¯ä»¥é¡ºåˆ©çš„è¿è¡Œ <code>dcommit</code> ï¼š</p>

<pre><code>$ git svn dcommit
Committing to file:///tmp/test-svn/trunk ...
       M      README.txt
Committed r81
       M      README.txt
r81 = 456cbe6337abe49154db70106d1836bc1332deed (trunk)
No changes between current HEAD and refs/remotes/trunk
Resetting to the latest refs/remotes/trunk</code></pre>

<p>éœ€è¦ç‰¢è®°çš„ä¸€ç‚¹æ˜¯ï¼ŒGit è¦æ±‚æˆ‘ä»¬åœ¨æ¨é€ä¹‹å‰å…ˆåˆå¹¶ä¸Šæ¸¸ä»“åº“ä¸­æœ€æ–°çš„å†…å®¹ï¼Œè€Œ <code>git svn</code> åªè¦æ±‚å­˜åœ¨å†²çªçš„æ—¶å€™æ‰è¿™æ ·åšã€‚å‡å¦‚æœ‰äººå‘ä¸€ä¸ªæ–‡ä»¶æ¨é€äº†ä¸€äº›ä¿®æ”¹ï¼Œè¿™æ—¶ä½ è¦å‘å¦ä¸€ä¸ªæ–‡ä»¶æ¨é€ä¸€äº›ä¿®æ”¹ï¼Œé‚£ä¹ˆ <code>dcommit</code> å°†æ­£å¸¸å·¥ä½œï¼š</p>

<pre><code>$ git svn dcommit
Committing to file:///tmp/test-svn/trunk ...
       M      configure.ac
Committed r84
       M      autogen.sh
r83 = 8aa54a74d452f82eee10076ab2584c1fc424853b (trunk)
       M      configure.ac
r84 = cdbac939211ccb18aa744e581e46563af5d962d0 (trunk)
W: d2f23b80f67aaaa1f6f5aaef48fce3263ac71a92 and refs/remotes/trunk differ, \
  using rebase:
:100755 100755 efa5a59965fbbb5b2b0a12890f1b351bb5493c18 \
  015e4c98c482f0fa71e4d5434338014530b37fa6 M   autogen.sh
First, rewinding head to replay your work on top of it...
Nothing to do.</code></pre>

<p>è¿™ä¸€ç‚¹éœ€è¦ç‰¢è®°ï¼Œå› ä¸ºå®ƒçš„ç»“æœæ˜¯æ¨é€ä¹‹åé¡¹ç›®å¤„äºä¸€ä¸ªä¸å®Œæ•´å­˜åœ¨ä¸ä»»ä½•ä¸»æœºä¸Šçš„çŠ¶æ€ã€‚å¦‚æœåšå‡ºçš„ä¿®æ”¹æ— æ³•å…¼å®¹ä½†æ²¡æœ‰äº§ç”Ÿå†²çªï¼Œåˆ™å¯èƒ½é€ æˆä¸€äº›å¾ˆéš¾ç¡®è¯Šçš„éš¾é¢˜ã€‚è¿™å’Œä½¿ç”¨ Git æœåŠ¡å™¨æ˜¯ä¸åŒçš„â€”â€”åœ¨ Git ä¸–ç•Œé‡Œï¼Œå‘å¸ƒä¹‹å‰ï¼Œä½ å¯ä»¥åœ¨å®¢æˆ·ç«¯ç³»ç»Ÿé‡Œå®Œæ•´çš„æµ‹è¯•é¡¹ç›®çš„çŠ¶æ€ï¼Œè€Œåœ¨ SVN æ°¸è¿œéƒ½æ²¡æ³•ç¡®ä¿æäº¤å‰åé¡¹ç›®çš„çŠ¶æ€å®Œå…¨ä¸€æ ·ã€‚</p>

<p>åŠæ—¶è¿˜æ²¡æ‰“ç®—è¿›è¡Œæäº¤ï¼Œä½ ä¹Ÿåº”è¯¥ç”¨è¿™ä¸ªå‘½ä»¤ä» Subversion æœåŠ¡å™¨æ‹‰å–æœ€æ–°ä¿®æ”¹ã€‚<code>sit svn fetch</code> èƒ½è·å–æœ€æ–°çš„æ•°æ®ï¼Œä¸è¿‡ <code>git svn rebase</code> æ‰ä¼šåœ¨è·å–ä¹‹ååœ¨æœ¬åœ°è¿›è¡Œæ›´æ–° ã€‚</p>

<pre><code>$ git svn rebase
       M      generate_descriptor_proto.sh
r82 = bd16df9173e424c6f52c337ab6efa7f7643282f1 (trunk)
First, rewinding head to replay your work on top of it...
Fast-forwarded master to refs/remotes/trunk.</code></pre>

<p>ä¸æ—¶åœ°è¿è¡Œä¸€ä¸‹ <code>git svn rebase</code> å¯ä»¥ç¡®ä¿ä½ çš„ä»£ç æ²¡æœ‰è¿‡æ—¶ã€‚ä¸è¿‡ï¼Œè¿è¡Œè¯¥å‘½ä»¤æ—¶éœ€è¦ç¡®ä¿å·¥ä½œç›®å½•çš„æ•´æ´ã€‚å¦‚æœåœ¨æœ¬åœ°åšäº†ä¿®æ”¹ï¼Œåˆ™å¿…é¡»åœ¨è¿è¡Œ <code>git svn rebase</code> ä¹‹å‰æˆ–æš‚å­˜å·¥ä½œï¼Œæˆ–æš‚æ—¶æäº¤å†…å®¹â€”â€”å¦åˆ™ï¼Œè¯¥å‘½ä»¤ä¼šå‘ç°è¡åˆçš„ç»“æœåŒ…å«ç€å†²çªå› è€Œç»ˆæ­¢ã€‚</p>

<h3 id='git_'>Git åˆ†æ”¯é—®é¢˜</h3>

<p>ä¹ æƒ¯äº† Git çš„å·¥ä½œæµç¨‹ä»¥åï¼Œä½ å¯èƒ½ä¼šåˆ›å»ºä¸€äº›ç‰¹æ€§åˆ†æ”¯ï¼Œå®Œæˆç›¸å…³çš„å¼€å‘å·¥ä½œï¼Œç„¶ååˆå¹¶ä»–ä»¬ã€‚å¦‚æœè¦ç”¨ git svn å‘ Subversion æ¨é€å†…å®¹ï¼Œé‚£ä¹ˆæœ€å¥½æ˜¯æ¯æ¬¡ç”¨è¡åˆæ¥å¹¶å…¥ä¸€ä¸ªå•ä¸€åˆ†æ”¯ï¼Œè€Œä¸æ˜¯ç›´æ¥åˆå¹¶ã€‚ä½¿ç”¨è¡åˆçš„åŸå› æ˜¯ Subversion åªæœ‰ä¸€ä¸ªçº¿æ€§çš„å†å²è€Œä¸åƒ Git é‚£æ ·å¤„ç†åˆå¹¶ï¼Œæ‰€ä»¥ Git svn åœ¨æŠŠå¿«ç…§è½¬æ¢ä¸º Subversion çš„ commit æ—¶åªèƒ½åŒ…å«ç¬¬ä¸€ä¸ªç¥–å…ˆã€‚</p>

<p>å‡è®¾åˆ†æ”¯å†å²å¦‚ä¸‹ï¼šåˆ›å»ºä¸€ä¸ª <code>experiment</code> åˆ†æ”¯ï¼Œè¿›è¡Œä¸¤æ¬¡æäº¤ï¼Œç„¶ååˆå¹¶åˆ° <code>master</code> ã€‚åœ¨ <code>dcommit</code> çš„æ—¶å€™ä¼šå¾—åˆ°å¦‚ä¸‹è¾“å‡ºï¼š</p>

<pre><code>$ git svn dcommit
Committing to file:///tmp/test-svn/trunk ...
       M      CHANGES.txt
Committed r85
       M      CHANGES.txt
r85 = 4bfebeec434d156c36f2bcd18f4e3d97dc3269a2 (trunk)
No changes between current HEAD and refs/remotes/trunk
Resetting to the latest refs/remotes/trunk
COPYING.txt: locally modified
INSTALL.txt: locally modified
       M      COPYING.txt
       M      INSTALL.txt
Committed r86
       M      INSTALL.txt
       M      COPYING.txt
r86 = 2647f6b86ccfcaad4ec58c520e369ec81f7c283c (trunk)
No changes between current HEAD and refs/remotes/trunk
Resetting to the latest refs/remotes/trunk</code></pre>

<p>åœ¨ä¸€ä¸ªåŒ…å«äº†åˆå¹¶å†å²çš„åˆ†æ”¯ä¸Šä½¿ç”¨ <code>dcommit</code> å¯ä»¥æˆåŠŸè¿è¡Œï¼Œä¸è¿‡åœ¨ Git é¡¹ç›®çš„å†å²ä¸­ï¼Œå®ƒæ²¡æœ‰é‡å†™ä½ åœ¨ <code>experiment</code> åˆ†æ”¯ä¸­çš„ä¸¤ä¸ª commit â€”â€”å¦ä¸€æ–¹é¢ï¼Œè¿™äº›æ”¹å˜å´å‡ºç°åœ¨äº† SVN ç‰ˆæœ¬ä¸­åŒä¸€ä¸ªåˆå¹¶ commit ä¸­ã€‚</p>

<p>åœ¨åˆ«äººå…‹éš†è¯¥é¡¹ç›®çš„æ—¶å€™ï¼Œåªèƒ½çœ‹åˆ°è¿™ä¸ªåˆå¹¶ commit åŒ…å«äº†æ‰€æœ‰å‘ç”Ÿè¿‡çš„ä¿®æ”¹ï¼›ä»–ä»¬æ— æ³•è·çŸ¥ä¿®æ”¹çš„ä½œè€…å’Œæ—¶é—´ç­‰æäº¤ä¿¡æ¯ã€‚</p>

<h3 id='subversion_'>Subversion åˆ†æ”¯</h3>

<p>Subversion çš„åˆ†æ”¯å’Œ Git ä¸­çš„ä¸å°½ç›¸åŒï¼›é¿å…è¿‡å¤šçš„ä½¿ç”¨å¯èƒ½æ˜¯æœ€å¥½æ–¹æ¡ˆã€‚ä¸è¿‡ï¼Œç”¨ git svn åˆ›å»ºå’Œæäº¤ä¸åŒçš„ Subversion åˆ†æ”¯ä»æ˜¯å¯è¡Œçš„ã€‚</p>

<h4 id='_svn_'>åˆ›å»ºæ–°çš„ SVN åˆ†æ”¯</h4>

<p>è¦åœ¨ Subversion ä¸­å»ºç«‹ä¸€ä¸ªæ–°åˆ†æ”¯ï¼Œéœ€è¦è¿è¡Œ <code>git svn branch [åˆ†æ”¯å]</code> To create a new branch in Subversion, you run <code>git svn branch [branchname]</code>:</p>

<pre><code>$ git svn branch opera
Copying file:///tmp/test-svn/trunk at r87 to file:///tmp/test-svn/branches/opera...
Found possible branch point: file:///tmp/test-svn/trunk =&gt; \
  file:///tmp/test-svn/branches/opera, 87
Found branch parent: (opera) 1f6bfe471083cbca06ac8d4176f7ad4de0d62e5f
Following parent with do_switch
Successfully followed parent
r89 = 9b6fe0b90c5c9adf9165f700897518dbc54a7cbf (opera)</code></pre>

<p>ç›¸å½“äºåœ¨ Subversion ä¸­çš„ <code>svn copy trunk branches/opera</code> å‘½ä»¤å¹¶ä¸”å¯¹ Subversion æœåŠ¡å™¨è¿›è¡Œäº†ç›¸å…³æ“ä½œã€‚å€¼å¾—æé†’çš„æ˜¯å®ƒæ²¡æœ‰æ£€å‡ºå’Œè½¬æ¢åˆ°é‚£ä¸ªåˆ†æ”¯ï¼›å¦‚æœç°åœ¨è¿›è¡Œæäº¤ï¼Œå°†æäº¤åˆ°æœåŠ¡å™¨ä¸Šçš„ <code>trunk</code>ï¼Œ è€Œé <code>opera</code>ã€‚</p>

<h3 id='id393'>åˆ‡æ¢å½“å‰åˆ†æ”¯</h3>

<p>Git é€šè¿‡æœå¯»æäº¤å†å²ä¸­ Subversion åˆ†æ”¯çš„å¤´éƒ¨æ¥å†³å®š dcommit çš„ç›®çš„åœ°â€”â€”è€Œå®ƒåº”è¯¥åªæœ‰ä¸€ä¸ªï¼Œé‚£å°±æ˜¯å½“å‰åˆ†æ”¯å†å²ä¸­æœ€è¿‘ä¸€æ¬¡åŒ…å« <code>git-svn-id</code> çš„æäº¤ã€‚</p>

<p>å¦‚æœéœ€è¦åŒæ—¶åœ¨å¤šä¸ªåˆ†æ”¯ä¸Šæäº¤ï¼Œå¯ä»¥é€šè¿‡å¯¼å…¥ Subversion ä¸ŠæŸä¸ªå…¶ä»–åˆ†æ”¯çš„ commit æ¥å»ºç«‹ä»¥è¯¥åˆ†æ”¯ä¸º <code>dcommit</code> ç›®çš„åœ°çš„æœ¬åœ°åˆ†æ”¯ã€‚æ¯”å¦‚ä½ æƒ³æ‹¥æœ‰ä¸€ä¸ªå¹¶è¡Œç»´æŠ¤çš„ <code>opera</code> åˆ†æ”¯ï¼Œå¯ä»¥è¿è¡Œ</p>

<pre><code>$ git branch opera remotes/opera</code></pre>

<p>ç„¶åï¼Œå¦‚æœè¦æŠŠ <code>opera</code> åˆ†æ”¯å¹¶å…¥ <code>trunk</code> ï¼ˆæœ¬åœ°çš„ <code>master</code> åˆ†æ”¯ï¼‰ï¼Œå¯ä»¥ä½¿ç”¨æ™®é€šçš„ <code>git merge</code>ã€‚ä¸è¿‡æœ€å¥½æä¾›ä¸€æ¡æè¿°æäº¤çš„ä¿¡æ¯ï¼ˆé€šè¿‡ <code>-m</code>ï¼‰ï¼Œå¦åˆ™è¿™æ¬¡åˆå¹¶çš„è®°å½•æ˜¯ <code>Merge branch opera</code> ï¼Œè€Œä¸æ˜¯ä»»ä½•æœ‰ç”¨çš„ä¸œè¥¿ã€‚</p>

<p>è®°ä½ï¼Œè™½ç„¶ä½¿ç”¨äº† <code>git merge</code> æ¥è¿›è¡Œè¿™æ¬¡æ“ä½œï¼Œå¹¶ä¸”åˆå¹¶è¿‡ç¨‹å¯èƒ½æ¯”ä½¿ç”¨ Subversion ç®€å•ä¸€äº›ï¼ˆå› ä¸º Git ä¼šè‡ªåŠ¨æ‰¾åˆ°é€‚åˆçš„åˆå¹¶åŸºç¡€ï¼‰ï¼Œè¿™å¹¶ä¸æ˜¯ä¸€æ¬¡æ™®é€šçš„ Git åˆå¹¶æäº¤ã€‚æœ€ç»ˆå®ƒå°†è¢«æ¨é€å› commit æ— æ³•åŒ…å«å¤šä¸ªç¥–å…ˆçš„ Subversion æœåŠ¡å™¨ä¸Šï¼›å› è€Œåœ¨æ¨é€ä¹‹åï¼Œå®ƒå°†å˜æˆä¸€ä¸ªåŒ…å«äº†æ‰€æœ‰åœ¨å…¶ä»–åˆ†æ”¯ä¸Šåšå‡ºçš„æ”¹å˜çš„å•ä¸€ commitã€‚æŠŠä¸€ä¸ªåˆ†æ”¯åˆå¹¶åˆ°å¦ä¸€ä¸ªåˆ†æ”¯ä»¥åï¼Œä½ æ²¡æ³•åƒåœ¨ Git ä¸­é‚£æ ·è½»æ˜“çš„å›åˆ°é‚£ä¸ªåˆ†æ”¯ä¸Šç»§ç»­å·¥ä½œã€‚æäº¤æ—¶è¿è¡Œçš„ <code>dcommit</code> å‘½ä»¤æ“¦é™¤äº†å…¨éƒ¨æœ‰å…³å“ªä¸ªåˆ†æ”¯è¢«å¹¶å…¥çš„ä¿¡æ¯ï¼Œå› è€Œä»¥åçš„åˆå¹¶åŸºç¡€è®¡ç®—å°†æ˜¯ä¸æ­£ç¡®çš„â€”â€” dcommit è®© <code>git merge</code> çš„ç»“æœå˜å¾—ç±»ä¼¼äº <code>git merge --squash</code>ã€‚ä¸å¹¸çš„æ˜¯ï¼Œæˆ‘ä»¬æ²¡æœ‰ä»€ä¹ˆå¥½åŠæ³•æ¥é¿å…è¯¥æƒ…å†µâ€”â€” Subversion æ— æ³•å‚¨å­˜è¿™ä¸ªä¿¡æ¯ï¼Œæ‰€ä»¥åœ¨ä½¿ç”¨å®ƒä½œä¸ºæœåŠ¡å™¨çš„æ—¶å€™ä½ å°†æ°¸è¿œä¸ºè¿™ä¸ªç¼ºé™·æ‰€å›°ã€‚ä¸ºäº†ä¸å‡ºç°è¿™ç§é—®é¢˜ï¼Œåœ¨æŠŠæœ¬åœ°åˆ†æ”¯ï¼ˆæœ¬ä¾‹ä¸­çš„ <code>opera</code>ï¼‰å¹¶å…¥ trunk ä»¥ååº”è¯¥ç«‹å³å°†å…¶åˆ é™¤ã€‚</p>

<h3 id='_subversion_'>å¯¹åº” Subversion çš„å‘½ä»¤</h3>

<p><code>git svn</code> å·¥å…·é›†åˆäº†è‹¥å¹²ä¸ªä¸ Subversion ç±»ä¼¼çš„åŠŸèƒ½ï¼Œå¯¹åº”çš„å‘½ä»¤å¯ä»¥ç®€åŒ–å‘ Git çš„è½¬åŒ–è¿‡ç¨‹ã€‚ä¸‹é¢è¿™äº›å‘½ä»¤èƒ½å®ç° Subversion çš„è¿™äº›åŠŸèƒ½ã€‚</p>

<h4 id='svn_'>SVN é£æ ¼çš„å†å²</h4>

<p>ä¹ æƒ¯äº† Subversion çš„äººå¯èƒ½æƒ³ä»¥ SVN çš„é£æ ¼æ˜¾ç¤ºå†å²ï¼Œè¿è¡Œ <code>git svn log</code> å¯ä»¥è®©æäº¤å†å²æ˜¾ç¤ºä¸º SVN æ ¼å¼ï¼š</p>

<pre><code>$ git svn log
------------------------------------------------------------------------
r87 | schacon | 2009-05-02 16:07:37 -0700 (Sat, 02 May 2009) | 2 lines

autogen change

------------------------------------------------------------------------
r86 | schacon | 2009-05-02 16:00:21 -0700 (Sat, 02 May 2009) | 2 lines

Merge branch &#39;experiment&#39;

------------------------------------------------------------------------
r85 | schacon | 2009-05-02 16:00:09 -0700 (Sat, 02 May 2009) | 2 lines

updated the changelog</code></pre>

<p>å…³äº <code>git svn log</code> ï¼Œæœ‰ä¸¤ç‚¹éœ€è¦æ³¨æ„ã€‚é¦–å…ˆï¼Œå®ƒå¯ä»¥ç¦»çº¿å·¥ä½œï¼Œä¸åƒ <code>svn log</code> å‘½ä»¤ï¼Œéœ€è¦å‘ Subversion æœåŠ¡å™¨ç´¢å–æ•°æ®ã€‚å…¶æ¬¡ï¼Œå®ƒä»…ä»…æ˜¾ç¤ºå·²ç»æäº¤åˆ° Subversion æœåŠ¡å™¨ä¸Šçš„ commitã€‚åœ¨æœ¬åœ°å°šæœª dcommit çš„ Git æ•°æ®ä¸ä¼šå‡ºç°åœ¨è¿™é‡Œï¼›å…¶ä»–äººå‘ Subversion æœåŠ¡å™¨æ–°æäº¤çš„æ•°æ®ä¹Ÿä¸ä¼šæ˜¾ç¤ºã€‚ç­‰äºè¯´æ˜¯æ˜¾ç¤ºäº†æœ€è¿‘å·²çŸ¥ Subversion æœåŠ¡å™¨ä¸Šçš„çŠ¶æ€ã€‚</p>

<h4 id='svn_'>SVN æ—¥å¿—</h4>

<p>ç±»ä¼¼ <code>git svn log</code> å¯¹ <code>git log</code> çš„æ¨¡æ‹Ÿï¼Œ<code>svn annotate</code> çš„ç­‰æ•ˆå‘½ä»¤æ˜¯ <code>git svn blame [æ–‡ä»¶å]</code>ã€‚å…¶è¾“å‡ºå¦‚ä¸‹ï¼š</p>

<pre><code>$ git svn blame README.txt 
 2   temporal Protocol Buffers - Google&#39;s data interchange format
 2   temporal Copyright 2008 Google Inc.
 2   temporal http://code.google.com/apis/protocolbuffers/
 2   temporal 
22   temporal C++ Installation - Unix
22   temporal =======================
 2   temporal 
79    schacon Committing in git-svn.
78    schacon 
 2   temporal To build and install the C++ Protocol Buffer runtime and the Protocol
 2   temporal Buffer compiler (protoc) execute the following:
 2   temporal </code></pre>

<p>åŒæ ·ï¼Œå®ƒä¸æ˜¾ç¤ºæœ¬åœ°çš„ Git æäº¤ä»¥åŠ Subversion ä¸Šåæ¥æ›´æ–°çš„å†…å®¹ã€‚</p>

<h4 id='svn_'>SVN æœåŠ¡å™¨ä¿¡æ¯</h4>

<p>è¿˜å¯ä»¥ä½¿ç”¨ <code>git svn info</code> æ¥è·å–ä¸è¿è¡Œ <code>svn info</code> ç±»ä¼¼çš„ä¿¡æ¯ï¼š</p>

<pre><code>$ git svn info
Path: .
URL: https://schacon-test.googlecode.com/svn/trunk
Repository Root: https://schacon-test.googlecode.com/svn
Repository UUID: 4c93b258-373f-11de-be05-5f7a86268029
Revision: 87
Node Kind: directory
Schedule: normal
Last Changed Author: schacon
Last Changed Rev: 87
Last Changed Date: 2009-05-02 16:07:37 -0700 (Sat, 02 May 2009)</code></pre>

<p>å®ƒä¸ <code>blame</code> å’Œ <code>log</code> çš„ç›¸åŒç‚¹åœ¨äºç¦»çº¿è¿è¡Œä»¥åŠåªæ›´æ–°åˆ°æœ€åä¸€æ¬¡ä¸ Subversion æœåŠ¡å™¨é€šä¿¡çš„çŠ¶æ€ã€‚</p>

<h4 id='_subversion_'>ç•¥ Subversion ä¹‹æ‰€ç•¥</h4>

<p>å‡å¦‚å…‹éš†äº†ä¸€ä¸ªåŒ…å«äº† <code>svn:ignore</code> å±æ€§çš„ Subversion ä»“åº“ï¼Œå°±æœ‰å¿…è¦å»ºç«‹å¯¹åº”çš„ <code>.gitignore</code> æ–‡ä»¶æ¥é˜²æ­¢æ„å¤–æäº¤ä¸€äº›ä¸åº”è¯¥æäº¤çš„æ–‡ä»¶ã€‚<code>git svn</code> æœ‰ä¸¤ä¸ªæœ‰ç›Šäºæ”¹å–„è¯¥é—®é¢˜çš„å‘½ä»¤ã€‚ç¬¬ä¸€ä¸ªæ˜¯ <code>git svn create-ignore</code>ï¼Œå®ƒè‡ªåŠ¨å»ºç«‹å¯¹åº”çš„ <code>.gitignore</code> æ–‡ä»¶ï¼Œä»¥ä¾¿ä¸‹æ¬¡æäº¤çš„æ—¶å€™å¯ä»¥åŒ…å«å®ƒã€‚</p>

<p>ç¬¬äºŒä¸ªå‘½ä»¤æ˜¯ <code>git svn show-ignore</code>ï¼Œå®ƒæŠŠéœ€è¦æ”¾è¿› <code>.gitignore</code> æ–‡ä»¶ä¸­çš„å†…å®¹æ‰“å°åˆ°æ ‡å‡†è¾“å‡ºï¼Œæ–¹ä¾¿æˆ‘ä»¬æŠŠè¾“å‡ºé‡å®šå‘åˆ°é¡¹ç›®çš„é»‘åå•æ–‡ä»¶ï¼š</p>

<pre><code>$ git svn show-ignore &gt; .git/info/exclude</code></pre>

<p>è¿™æ ·ä¸€æ¥ï¼Œé¿å…äº† <code>.gitignore</code> å¯¹é¡¹ç›®çš„å¹²æ‰°ã€‚å¦‚æœä½ æ˜¯ä¸€ä¸ª Subversion å›¢é˜Ÿé‡Œå”¯ä¸€çš„ Git ç”¨æˆ·ï¼Œè€Œå…¶ä»–é˜Ÿå‹ä¸å–œæ¬¢é¡¹ç›®åŒ…å« <code>.gitignore</code>ï¼Œè¯¥æ–¹æ³•æ˜¯ä½ çš„ä¸äºŒä¹‹é€‰ã€‚</p>

<h3 id='gitsvn_'>Git-Svn æ€»ç»“</h3>

<p><code>git svn</code> å·¥å…·é›†åœ¨å½“å‰ä¸å¾—ä¸ä½¿ç”¨ Subversion æœåŠ¡å™¨æˆ–è€…å¼€å‘ç¯å¢ƒè¦æ±‚ä½¿ç”¨ Subversion æœåŠ¡å™¨çš„æ—¶å€™æ ¼å¤–æœ‰ç”¨ã€‚ä¸å¦¨æŠŠå®ƒçœ‹æˆä¸€ä¸ªè·›è„šçš„ Gitï¼Œç„¶è€Œï¼Œä½ è¿˜æ˜¯æœ‰å¯èƒ½åœ¨è½¬æ¢è¿‡ç¨‹ä¸­ç¢°åˆ°ä¸€äº›å›°æƒ‘ä½ å’Œåˆä½œè€…ä»¬çš„è¿·é¢˜ã€‚ä¸ºäº†é¿å…éº»çƒ¦ï¼Œè¯•ç€éµå®ˆå¦‚ä¸‹å®ˆåˆ™ï¼š</p>

<ul>
<li>ä¿æŒä¸€ä¸ªä¸åŒ…å«ç”± <code>git merge</code> ç”Ÿæˆçš„ commit çš„çº¿æ€§æäº¤å†å²ã€‚å°†åœ¨ä¸»çº¿åˆ†æ”¯å¤–è¿›è¡Œçš„å¼€å‘é€šé€šè¡åˆå›ä¸»çº¿ï¼›é¿å…ç›´æ¥åˆå¹¶ã€‚</li>

<li>ä¸è¦å•ç‹¬å»ºç«‹å’Œä½¿ç”¨ä¸€ä¸ª Git æœåŠ¡æ¥æåˆä½œã€‚å¯ä»¥ä¸ºäº†åŠ é€Ÿæ–°å¼€å‘è€…çš„å…‹éš†è¿›ç¨‹å»ºç«‹ä¸€ä¸ªï¼Œä½†æ˜¯ä¸è¦å‘å®ƒæä¾›ä»»ä½•ä¸åŒ…å« <code>git-svn-id</code> æ¡ç›®çš„å†…å®¹ã€‚ç”šè‡³å¯ä»¥æ·»åŠ ä¸€ä¸ª <code>pre-receive</code> æŒ‚é’©æ¥åœ¨æ¯ä¸€ä¸ªæäº¤ä¿¡æ¯ä¸­æŸ¥æ‰¾ <code>git-svn-id</code> å¹¶æ‹’ç»æäº¤é‚£äº›ä¸åŒ…å«å®ƒçš„ commitã€‚</li>
</ul>

<p>å¦‚æœéµå¾ªè¿™äº›å®ˆåˆ™ï¼Œåœ¨ Subversion ä¸Šå·¥ä½œè¿˜å¯ä»¥æ¥å—ã€‚ç„¶è€Œï¼Œå¦‚æœèƒ½è¿å¾™åˆ°çœŸæ­£çš„ Git æœåŠ¡å™¨ï¼Œåˆ™èƒ½ä¸ºå›¢é˜Ÿå¸¦æ¥æ›´å¤šå¥½å¤„ã€‚</p>

<div id='nav'>
<a href="ch8-0.html" tppabs="http://progit.org/book/zh/ch8-0.html">prev</a> | <a href="ch8-2.html" tppabs="http://progit.org/book/zh/ch8-2.html">next</a>
</div>
        <div class='clearfix'></div>
      </div>
    </div>
    <div id='footer'>
      Book translated into 
        <a href="javascript:if(confirm('http://progit.org/book/de  \n\n¸ÃÎÄ¼şÎ´±» Teleport Pro ÏÂÔØ£¬ÒòÎª ËüÎ»ÓÚÆğÊ¼µØÖ·ÒÔÉèÖÃµÄ±ß½çÒÔÍâµÄÓò»òÂ·¾¶ÖĞ¡£  \n\nÄãÏëÒª´Ó·şÎñÆ÷´ò¿ªËüÂğ?'))window.location='http://progit.org/book/de'" tppabs="http://progit.org/book/de">German</a>, 
        <a href="javascript:if(confirm('http://progit.org/book/zh  \n\n¸ÃÎÄ¼şÎ´±» Teleport Pro ÏÂÔØ£¬ÒòÎª ËüÎ»ÓÚÆğÊ¼µØÖ·ÒÔÉèÖÃµÄ±ß½çÒÔÍâµÄÓò»òÂ·¾¶ÖĞ¡£  \n\nÄãÏëÒª´Ó·şÎñÆ÷´ò¿ªËüÂğ?'))window.location='http://progit.org/book/zh'" tppabs="http://progit.org/book/zh">Chinese</a>, 
        <a href="javascript:if(confirm('http://progit.org/book/ja  \n\n¸ÃÎÄ¼şÎ´±» Teleport Pro ÏÂÔØ£¬ÒòÎª ËüÎ»ÓÚÆğÊ¼µØÖ·ÒÔÉèÖÃµÄ±ß½çÒÔÍâµÄÓò»òÂ·¾¶ÖĞ¡£  \n\nÄãÏëÒª´Ó·şÎñÆ÷´ò¿ªËüÂğ?'))window.location='http://progit.org/book/ja'" tppabs="http://progit.org/book/ja">Japanese</a> and 
        <a href="javascript:if(confirm('http://progit.org/book/nl  \n\n¸ÃÎÄ¼şÎ´±» Teleport Pro ÏÂÔØ£¬ÒòÎª ËüÎ»ÓÚÆğÊ¼µØÖ·ÒÔÉèÖÃµÄ±ß½çÒÔÍâµÄÓò»òÂ·¾¶ÖĞ¡£  \n\nÄãÏëÒª´Ó·şÎñÆ÷´ò¿ªËüÂğ?'))window.location='http://progit.org/book/nl'" tppabs="http://progit.org/book/nl">Dutch</a>.<br/>
      Partial translations available in 
        <a href="javascript:if(confirm('http://progit.org/book/ar  \n\n¸ÃÎÄ¼şÎ´±» Teleport Pro ÏÂÔØ£¬ÒòÎª ËüÎ»ÓÚÆğÊ¼µØÖ·ÒÔÉèÖÃµÄ±ß½çÒÔÍâµÄÓò»òÂ·¾¶ÖĞ¡£  \n\nÄãÏëÒª´Ó·şÎñÆ÷´ò¿ªËüÂğ?'))window.location='http://progit.org/book/ar'" tppabs="http://progit.org/book/ar">Arabic</a>,
        <a href="javascript:if(confirm('http://progit.org/book/cs  \n\n¸ÃÎÄ¼şÎ´±» Teleport Pro ÏÂÔØ£¬ÒòÎª ËüÎ»ÓÚÆğÊ¼µØÖ·ÒÔÉèÖÃµÄ±ß½çÒÔÍâµÄÓò»òÂ·¾¶ÖĞ¡£  \n\nÄãÏëÒª´Ó·şÎñÆ÷´ò¿ªËüÂğ?'))window.location='http://progit.org/book/cs'" tppabs="http://progit.org/book/cs">Czech</a>,
        <a href="javascript:if(confirm('http://progit.org/book/es  \n\n¸ÃÎÄ¼şÎ´±» Teleport Pro ÏÂÔØ£¬ÒòÎª ËüÎ»ÓÚÆğÊ¼µØÖ·ÒÔÉèÖÃµÄ±ß½çÒÔÍâµÄÓò»òÂ·¾¶ÖĞ¡£  \n\nÄãÏëÒª´Ó·şÎñÆ÷´ò¿ªËüÂğ?'))window.location='http://progit.org/book/es'" tppabs="http://progit.org/book/es">Spanish</a>,
        <a href="javascript:if(confirm('http://progit.org/book/fr  \n\n¸ÃÎÄ¼şÎ´±» Teleport Pro ÏÂÔØ£¬ÒòÎª ËüÎ»ÓÚÆğÊ¼µØÖ·ÒÔÉèÖÃµÄ±ß½çÒÔÍâµÄÓò»òÂ·¾¶ÖĞ¡£  \n\nÄãÏëÒª´Ó·şÎñÆ÷´ò¿ªËüÂğ?'))window.location='http://progit.org/book/fr'" tppabs="http://progit.org/book/fr">French</a>,
        <a href="javascript:if(confirm('http://progit.org/book/id  \n\n¸ÃÎÄ¼şÎ´±» Teleport Pro ÏÂÔØ£¬ÒòÎª ËüÎ»ÓÚÆğÊ¼µØÖ·ÒÔÉèÖÃµÄ±ß½çÒÔÍâµÄÓò»òÂ·¾¶ÖĞ¡£  \n\nÄãÏëÒª´Ó·şÎñÆ÷´ò¿ªËüÂğ?'))window.location='http://progit.org/book/id'" tppabs="http://progit.org/book/id">Indonesian</a>,
        <a href="javascript:if(confirm('http://progit.org/book/it  \n\n¸ÃÎÄ¼şÎ´±» Teleport Pro ÏÂÔØ£¬ÒòÎª ËüÎ»ÓÚÆğÊ¼µØÖ·ÒÔÉèÖÃµÄ±ß½çÒÔÍâµÄÓò»òÂ·¾¶ÖĞ¡£  \n\nÄãÏëÒª´Ó·şÎñÆ÷´ò¿ªËüÂğ?'))window.location='http://progit.org/book/it'" tppabs="http://progit.org/book/it">Italian</a>,
        <a href="javascript:if(confirm('http://progit.org/book/mk  \n\n¸ÃÎÄ¼şÎ´±» Teleport Pro ÏÂÔØ£¬ÒòÎª ËüÎ»ÓÚÆğÊ¼µØÖ·ÒÔÉèÖÃµÄ±ß½çÒÔÍâµÄÓò»òÂ·¾¶ÖĞ¡£  \n\nÄãÏëÒª´Ó·şÎñÆ÷´ò¿ªËüÂğ?'))window.location='http://progit.org/book/mk'" tppabs="http://progit.org/book/mk">Macedonian</a>,
        <a href="javascript:if(confirm('http://progit.org/book/pl  \n\n¸ÃÎÄ¼şÎ´±» Teleport Pro ÏÂÔØ£¬ÒòÎª ËüÎ»ÓÚÆğÊ¼µØÖ·ÒÔÉèÖÃµÄ±ß½çÒÔÍâµÄÓò»òÂ·¾¶ÖĞ¡£  \n\nÄãÏëÒª´Ó·şÎñÆ÷´ò¿ªËüÂğ?'))window.location='http://progit.org/book/pl'" tppabs="http://progit.org/book/pl">Polish</a>,
        <a href="javascript:if(confirm('http://progit.org/book/th  \n\n¸ÃÎÄ¼şÎ´±» Teleport Pro ÏÂÔØ£¬ÒòÎª ËüÎ»ÓÚÆğÊ¼µØÖ·ÒÔÉèÖÃµÄ±ß½çÒÔÍâµÄÓò»òÂ·¾¶ÖĞ¡£  \n\nÄãÏëÒª´Ó·şÎñÆ÷´ò¿ªËüÂğ?'))window.location='http://progit.org/book/th'" tppabs="http://progit.org/book/th">Thai</a> and
        <a href="javascript:if(confirm('http://progit.org/book/ru  \n\n¸ÃÎÄ¼şÎ´±» Teleport Pro ÏÂÔØ£¬ÒòÎª ËüÎ»ÓÚÆğÊ¼µØÖ·ÒÔÉèÖÃµÄ±ß½çÒÔÍâµÄÓò»òÂ·¾¶ÖĞ¡£  \n\nÄãÏëÒª´Ó·şÎñÆ÷´ò¿ªËüÂğ?'))window.location='http://progit.org/book/ru'" tppabs="http://progit.org/book/ru">Russian</a>
        .<br/>
      All content under <a href="javascript:if(confirm('http://creativecommons.org/licenses/by-nc-sa/3.0/us/  \n\n¸ÃÎÄ¼şÎ´±» Teleport Pro ÏÂÔØ£¬ÒòÎª ËüÎ»ÓÚÆğÊ¼µØÖ·ÒÔÉèÖÃµÄ±ß½çÒÔÍâµÄÓò»òÂ·¾¶ÖĞ¡£  \n\nÄãÏëÒª´Ó·şÎñÆ÷´ò¿ªËüÂğ?'))window.location='http://creativecommons.org/licenses/by-nc-sa/3.0/us/'" tppabs="http://creativecommons.org/licenses/by-nc-sa/3.0/us/">Creative Commons Attribution-Non Commercial-Share Alike 3.0 license</a>.
      <br/>Theme and code by <a href="javascript:if(confirm('http://github.com/mbleigh  \n\n¸ÃÎÄ¼şÎ´±» Teleport Pro ÏÂÔØ£¬ÒòÎª ËüÎ»ÓÚÆğÊ¼µØÖ·ÒÔÉèÖÃµÄ±ß½çÒÔÍâµÄÓò»òÂ·¾¶ÖĞ¡£  \n\nÄãÏëÒª´Ó·şÎñÆ÷´ò¿ªËüÂğ?'))window.location='http://github.com/mbleigh'" tppabs="http://github.com/mbleigh">Michael Bleigh</a>. Hosted by <a href="javascript:if(confirm('http://github.com/progit/progit.github.com/  \n\n¸ÃÎÄ¼şÎ´±» Teleport Pro ÏÂÔØ£¬ÒòÎª ËüÎ»ÓÚÆğÊ¼µØÖ·ÒÔÉèÖÃµÄ±ß½çÒÔÍâµÄÓò»òÂ·¾¶ÖĞ¡£  \n\nÄãÏëÒª´Ó·şÎñÆ÷´ò¿ªËüÂğ?'))window.location='http://github.com/progit/progit.github.com/'" tppabs="http://github.com/progit/progit.github.com/" target='_blank'>GitHub</a> and powered by <a href="javascript:if(confirm('http://github.com/mojombo/jekyll  \n\n¸ÃÎÄ¼şÎ´±» Teleport Pro ÏÂÔØ£¬ÒòÎª ËüÎ»ÓÚÆğÊ¼µØÖ·ÒÔÉèÖÃµÄ±ß½çÒÔÍâµÄÓò»òÂ·¾¶ÖĞ¡£  \n\nÄãÏëÒª´Ó·şÎñÆ÷´ò¿ªËüÂğ?'))window.location='http://github.com/mojombo/jekyll'" tppabs="http://github.com/mojombo/jekyll">Jekyll</a>.
    </div>
    <script type="text/javascript">
    var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www./");
    document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
    </script>
    <script type="text/javascript">
    try {
    var pageTracker = _gat._getTracker("UA-82337-15");
    pageTracker._trackPageview();
    } catch(err) {}</script>
  </body>
</html>
